name: generate themes on push
run-name: generate themes (triggered by ${{ github.actor }})

on: 
  push:
    branches: [main]
    
jobs:
  gen-themes:
    runs-on: windows-latest
    steps:
        - uses: actions/checkout@v4
        - name: "Generate CSS files"
          run: python ./generate.py
        - name: "Configure git"
          run:
            git config --local user.name actions-user
            git config --local user.email "actions@github.com"
        - name: "Check for changes"
          run: git status
        - name: "Stage changed files"
          run: git add .
        - name: "Commit changed files"
          run: git commit -m "Autogenerating CSS"
        - name: "Push changes"
          uses: ad-m/github-push-action@master
          with:
            github_token: ${{ secrets.GITHUB_TOKEN }}
            force: true